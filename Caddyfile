# Caddyfile â€” NQRust Identity HTTPS Reverse Proxy
#
# Caddy terminates TLS using a self-signed cert (generated by generate-cert.sh)
# and forwards all traffic to the Keycloak identity container on port 8080.
#
# Access: https://<VM-IP>:8008

:443 {
	tls /etc/certs/server.crt /etc/certs/server.key
	encode gzip
	reverse_proxy identity:8080
}

:80 {
	redir https://{host}:8008{uri} permanent
}
